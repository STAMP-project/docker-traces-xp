/**
 * File generated by the ThingML IDE
 * /!\Do not edit this file/!\
 * In case of a bug in the generated code,
 * please submit an issue on our GitHub
 **/

package org.thingml.generated;

import no.sintef.jasm.*;
import no.sintef.jasm.ext.*;

import org.thingml.generated.api.*;
import org.thingml.generated.messages.*;

import java.util.*;

/**
 * Definition for type : BasicIAControllerJava
 **/
public class BasicIAControllerJava extends Component implements IBasicIAControllerJava_game {

private boolean debug = false;
public boolean isDebug() {return debug;}
public void setDebug(boolean debug) {this.debug = debug;}
public String toString() {
String result = "instance " + getName() + "\n";
result += "\tbytesSentCounter = " + Controller_bytesSentCounter_var;
result += "\tctrlx = " + BasicIAController_ctrlx_var;
result += "";
return result;
}

public synchronized void updateIAval13padyballx_via_game(int IAControllerMsg_updateIAval13padyballx_ballx_var, byte IAControllerMsg_updateIAval13padyballx_val41_var, int IAControllerMsg_updateIAval13padyballx_pady_var, byte IAControllerMsg_updateIAval13padyballx_val13_var){
final Event _msg = updateIAval13padyballxType.instantiate(IAControllerMsg_updateIAval13padyballx_ballx_var, IAControllerMsg_updateIAval13padyballx_val41_var, IAControllerMsg_updateIAval13padyballx_pady_var, IAControllerMsg_updateIAval13padyballx_val13_var);
_msg.setPort(game_port);
receive(_msg);
}

public synchronized void updateIAballypadx_via_game(byte IAControllerMsg_updateIAballypadx_val40_var, int IAControllerMsg_updateIAballypadx_padx_var, int IAControllerMsg_updateIAballypadx_bally_var){
final Event _msg = updateIAballypadxType.instantiate(IAControllerMsg_updateIAballypadx_val40_var, IAControllerMsg_updateIAballypadx_padx_var, IAControllerMsg_updateIAballypadx_bally_var);
_msg.setPort(game_port);
receive(_msg);
}

private void sendPositionx_via_controls(byte ControllerMsgs_positionx_val36_var, int ControllerMsgs_positionx_x_var){
controls_port.send(positionxType.instantiate(ControllerMsgs_positionx_val36_var, ControllerMsgs_positionx_x_var));
}

private void sendPositionval11y_via_controls(byte ControllerMsgs_positionval11y_val11_var, byte ControllerMsgs_positionval11y_val37_var, int ControllerMsgs_positionval11y_y_var){
controls_port.send(positionval11yType.instantiate(ControllerMsgs_positionval11y_val11_var, ControllerMsgs_positionval11y_val37_var, ControllerMsgs_positionval11y_y_var));
}

//Attributes
private int BasicIAController_SC_Following_game_updateIA_pady_var;
private int BasicIAController_SC_Following_game_updateIA_bally_var;
private boolean BasicIAController_SC_Following_received_game_updateIAballypadx_var;
private int BasicIAController_SC_Following_game_updateIA_ballx_var;
private boolean BasicIAController_SC_Following_received_game_updateIAval13padyballx_var;
private long Controller_bytesSentCounter_var;
private int BasicIAController_ctrlx_var;
private byte BasicIAController_SC_Following_game_updateIA_val13_var;
private int BasicIAController_SC_Following_game_updateIA_padx_var;
//Ports
private Port controls_port;
private Port game_port;
//Message types
protected final PositionxMessageType positionxType = new PositionxMessageType();
protected final Positionval11yMessageType positionval11yType = new Positionval11yMessageType();
protected final Velocityval12MessageType velocityval12Type = new Velocityval12MessageType();
protected final VelocitydxdyMessageType velocitydxdyType = new VelocitydxdyMessageType();
protected final UpdateIAballypadxMessageType updateIAballypadxType = new UpdateIAballypadxMessageType();
protected final UpdateIAval13padyballxMessageType updateIAval13padyballxType = new UpdateIAval13padyballxMessageType();
//Empty Constructor
public BasicIAControllerJava() {
super();
}

//Getters and Setters for non readonly/final attributes
public int getBasicIAController_SC_Following_game_updateIA_pady_var() {
return BasicIAController_SC_Following_game_updateIA_pady_var;
}

public void setBasicIAController_SC_Following_game_updateIA_pady_var(int BasicIAController_SC_Following_game_updateIA_pady_var) {
this.BasicIAController_SC_Following_game_updateIA_pady_var = BasicIAController_SC_Following_game_updateIA_pady_var;
}

public BasicIAControllerJava initBasicIAController_SC_Following_game_updateIA_pady_var(int BasicIAController_SC_Following_game_updateIA_pady_var) {
this.BasicIAController_SC_Following_game_updateIA_pady_var = BasicIAController_SC_Following_game_updateIA_pady_var;
return this;
}

public int getBasicIAController_SC_Following_game_updateIA_bally_var() {
return BasicIAController_SC_Following_game_updateIA_bally_var;
}

public void setBasicIAController_SC_Following_game_updateIA_bally_var(int BasicIAController_SC_Following_game_updateIA_bally_var) {
this.BasicIAController_SC_Following_game_updateIA_bally_var = BasicIAController_SC_Following_game_updateIA_bally_var;
}

public BasicIAControllerJava initBasicIAController_SC_Following_game_updateIA_bally_var(int BasicIAController_SC_Following_game_updateIA_bally_var) {
this.BasicIAController_SC_Following_game_updateIA_bally_var = BasicIAController_SC_Following_game_updateIA_bally_var;
return this;
}

public boolean getBasicIAController_SC_Following_received_game_updateIAballypadx_var() {
return BasicIAController_SC_Following_received_game_updateIAballypadx_var;
}

public void setBasicIAController_SC_Following_received_game_updateIAballypadx_var(boolean BasicIAController_SC_Following_received_game_updateIAballypadx_var) {
this.BasicIAController_SC_Following_received_game_updateIAballypadx_var = BasicIAController_SC_Following_received_game_updateIAballypadx_var;
}

public BasicIAControllerJava initBasicIAController_SC_Following_received_game_updateIAballypadx_var(boolean BasicIAController_SC_Following_received_game_updateIAballypadx_var) {
this.BasicIAController_SC_Following_received_game_updateIAballypadx_var = BasicIAController_SC_Following_received_game_updateIAballypadx_var;
return this;
}

public int getBasicIAController_SC_Following_game_updateIA_ballx_var() {
return BasicIAController_SC_Following_game_updateIA_ballx_var;
}

public void setBasicIAController_SC_Following_game_updateIA_ballx_var(int BasicIAController_SC_Following_game_updateIA_ballx_var) {
this.BasicIAController_SC_Following_game_updateIA_ballx_var = BasicIAController_SC_Following_game_updateIA_ballx_var;
}

public BasicIAControllerJava initBasicIAController_SC_Following_game_updateIA_ballx_var(int BasicIAController_SC_Following_game_updateIA_ballx_var) {
this.BasicIAController_SC_Following_game_updateIA_ballx_var = BasicIAController_SC_Following_game_updateIA_ballx_var;
return this;
}

public boolean getBasicIAController_SC_Following_received_game_updateIAval13padyballx_var() {
return BasicIAController_SC_Following_received_game_updateIAval13padyballx_var;
}

public void setBasicIAController_SC_Following_received_game_updateIAval13padyballx_var(boolean BasicIAController_SC_Following_received_game_updateIAval13padyballx_var) {
this.BasicIAController_SC_Following_received_game_updateIAval13padyballx_var = BasicIAController_SC_Following_received_game_updateIAval13padyballx_var;
}

public BasicIAControllerJava initBasicIAController_SC_Following_received_game_updateIAval13padyballx_var(boolean BasicIAController_SC_Following_received_game_updateIAval13padyballx_var) {
this.BasicIAController_SC_Following_received_game_updateIAval13padyballx_var = BasicIAController_SC_Following_received_game_updateIAval13padyballx_var;
return this;
}

public long getController_bytesSentCounter_var() {
return Controller_bytesSentCounter_var;
}

public void setController_bytesSentCounter_var(long Controller_bytesSentCounter_var) {
this.Controller_bytesSentCounter_var = Controller_bytesSentCounter_var;
}

public BasicIAControllerJava initController_bytesSentCounter_var(long Controller_bytesSentCounter_var) {
this.Controller_bytesSentCounter_var = Controller_bytesSentCounter_var;
return this;
}

public int getBasicIAController_ctrlx_var() {
return BasicIAController_ctrlx_var;
}

public void setBasicIAController_ctrlx_var(int BasicIAController_ctrlx_var) {
this.BasicIAController_ctrlx_var = BasicIAController_ctrlx_var;
}

public BasicIAControllerJava initBasicIAController_ctrlx_var(int BasicIAController_ctrlx_var) {
this.BasicIAController_ctrlx_var = BasicIAController_ctrlx_var;
return this;
}

public byte getBasicIAController_SC_Following_game_updateIA_val13_var() {
return BasicIAController_SC_Following_game_updateIA_val13_var;
}

public void setBasicIAController_SC_Following_game_updateIA_val13_var(byte BasicIAController_SC_Following_game_updateIA_val13_var) {
this.BasicIAController_SC_Following_game_updateIA_val13_var = BasicIAController_SC_Following_game_updateIA_val13_var;
}

public BasicIAControllerJava initBasicIAController_SC_Following_game_updateIA_val13_var(byte BasicIAController_SC_Following_game_updateIA_val13_var) {
this.BasicIAController_SC_Following_game_updateIA_val13_var = BasicIAController_SC_Following_game_updateIA_val13_var;
return this;
}

public int getBasicIAController_SC_Following_game_updateIA_padx_var() {
return BasicIAController_SC_Following_game_updateIA_padx_var;
}

public void setBasicIAController_SC_Following_game_updateIA_padx_var(int BasicIAController_SC_Following_game_updateIA_padx_var) {
this.BasicIAController_SC_Following_game_updateIA_padx_var = BasicIAController_SC_Following_game_updateIA_padx_var;
}

public BasicIAControllerJava initBasicIAController_SC_Following_game_updateIA_padx_var(int BasicIAController_SC_Following_game_updateIA_padx_var) {
this.BasicIAController_SC_Following_game_updateIA_padx_var = BasicIAController_SC_Following_game_updateIA_padx_var;
return this;
}

//Getters for Ports
public Port getControls_port() {
return controls_port;
}
public Port getGame_port() {
return game_port;
}
private CompositeState buildBasicIAController_SC(){
final AtomicState state_BasicIAController_SC_Following = new AtomicState("Following");
state_BasicIAController_SC_Following.onEntry(()->{
sendPositionval11y_via_controls((byte) (0x71), (byte) (0xF0), (int) (0));
sendPositionx_via_controls((byte) (0x55), (int) (getBasicIAController_ctrlx_var()));
});
Handler h765420745 = new Handler();
h765420745.from(state_BasicIAController_SC_Following);
h765420745.event(updateIAval13padyballxType);
h765420745.guard((Event e)->{
final UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage updateIAval13padyballx = (UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage) e;
return  !(getBasicIAController_SC_Following_received_game_updateIAballypadx_var());
});

h765420745.port(game_port);
h765420745.action((Event e)->{
final UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage updateIAval13padyballx = (UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage) e;
BasicIAController_SC_Following_received_game_updateIAval13padyballx_var = (boolean) (true);
BasicIAController_SC_Following_game_updateIA_val13_var = (byte) (updateIAval13padyballx.val13);
BasicIAController_SC_Following_game_updateIA_pady_var = (int) (updateIAval13padyballx.pady);
BasicIAController_SC_Following_game_updateIA_ballx_var = (int) (updateIAval13padyballx.ballx);
});

Handler h1242874959 = new Handler();
h1242874959.from(state_BasicIAController_SC_Following);
h1242874959.event(updateIAballypadxType);
h1242874959.guard((Event e)->{
final UpdateIAballypadxMessageType.UpdateIAballypadxMessage updateIAballypadx = (UpdateIAballypadxMessageType.UpdateIAballypadxMessage) e;
return  !(getBasicIAController_SC_Following_received_game_updateIAval13padyballx_var());
});

h1242874959.port(game_port);
h1242874959.action((Event e)->{
final UpdateIAballypadxMessageType.UpdateIAballypadxMessage updateIAballypadx = (UpdateIAballypadxMessageType.UpdateIAballypadxMessage) e;
BasicIAController_SC_Following_received_game_updateIAballypadx_var = (boolean) (true);
BasicIAController_SC_Following_game_updateIA_bally_var = (int) (updateIAballypadx.bally);
BasicIAController_SC_Following_game_updateIA_padx_var = (int) (updateIAballypadx.padx);
});

Transition h1730129134 = new Transition();
h1730129134.from(state_BasicIAController_SC_Following).to(state_BasicIAController_SC_Following);
h1730129134.event(updateIAval13padyballxType);
h1730129134.guard((Event e)->{
final UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage updateIAval13padyballx = (UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage) e;
return getBasicIAController_SC_Following_received_game_updateIAballypadx_var();
});

h1730129134.port(game_port);
h1730129134.action((Event e)->{
final UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage updateIAval13padyballx = (UpdateIAval13padyballxMessageType.UpdateIAval13padyballxMessage) e;
BasicIAController_SC_Following_game_updateIA_val13_var = (byte) (updateIAval13padyballx.val13);
BasicIAController_SC_Following_game_updateIA_pady_var = (int) (updateIAval13padyballx.pady);
BasicIAController_SC_Following_game_updateIA_ballx_var = (int) (updateIAval13padyballx.ballx);
if(updateIAval13padyballx.ballx > getBasicIAController_SC_Following_game_updateIA_padx_var() + 400) {
BasicIAController_ctrlx_var = (int) (getBasicIAController_ctrlx_var() + 4);

} else {
if(updateIAval13padyballx.ballx < getBasicIAController_SC_Following_game_updateIA_padx_var() - 400) {
BasicIAController_ctrlx_var = (int) (getBasicIAController_ctrlx_var() - 4);

}

}
if(getBasicIAController_ctrlx_var() <  -100) {
BasicIAController_ctrlx_var = (int) ( -100);

} else {
if(getBasicIAController_ctrlx_var() > 100) {
BasicIAController_ctrlx_var = (int) (100);

}

}
BasicIAController_SC_Following_received_game_updateIAval13padyballx_var = (boolean) (false);
BasicIAController_SC_Following_received_game_updateIAballypadx_var = (boolean) (false);
});

Transition h297031141 = new Transition();
h297031141.from(state_BasicIAController_SC_Following).to(state_BasicIAController_SC_Following);
h297031141.event(updateIAballypadxType);
h297031141.guard((Event e)->{
final UpdateIAballypadxMessageType.UpdateIAballypadxMessage updateIAballypadx = (UpdateIAballypadxMessageType.UpdateIAballypadxMessage) e;
return getBasicIAController_SC_Following_received_game_updateIAval13padyballx_var();
});

h297031141.port(game_port);
h297031141.action((Event e)->{
final UpdateIAballypadxMessageType.UpdateIAballypadxMessage updateIAballypadx = (UpdateIAballypadxMessageType.UpdateIAballypadxMessage) e;
BasicIAController_SC_Following_game_updateIA_bally_var = (int) (updateIAballypadx.bally);
BasicIAController_SC_Following_game_updateIA_padx_var = (int) (updateIAballypadx.padx);
if(getBasicIAController_SC_Following_game_updateIA_ballx_var() > updateIAballypadx.padx + 400) {
BasicIAController_ctrlx_var = (int) (getBasicIAController_ctrlx_var() + 4);

} else {
if(getBasicIAController_SC_Following_game_updateIA_ballx_var() < updateIAballypadx.padx - 400) {
BasicIAController_ctrlx_var = (int) (getBasicIAController_ctrlx_var() - 4);

}

}
if(getBasicIAController_ctrlx_var() <  -100) {
BasicIAController_ctrlx_var = (int) ( -100);

} else {
if(getBasicIAController_ctrlx_var() > 100) {
BasicIAController_ctrlx_var = (int) (100);

}

}
BasicIAController_SC_Following_received_game_updateIAballypadx_var = (boolean) (false);
BasicIAController_SC_Following_received_game_updateIAval13padyballx_var = (boolean) (false);
});

final CompositeState state_BasicIAController_SC = new CompositeState("SC");
state_BasicIAController_SC.onEntry(()->{
});
state_BasicIAController_SC.add(state_BasicIAController_SC_Following);
state_BasicIAController_SC.initial(state_BasicIAController_SC_Following);
return state_BasicIAController_SC;
}

public Component buildBehavior(String session, Component root) {
if (root == null) {
//Init ports
controls_port = new Port("controls", this);
game_port = new Port("game", this);
} else {
controls_port = ((BasicIAControllerJava)root).controls_port;
game_port = ((BasicIAControllerJava)root).game_port;
}
if (session == null){
//Init state machine
behavior = buildBasicIAController_SC();
}
return this;
}

 byte rnd() {
return (byte) (Math.floor(Math.random() * Math.floor(246)) + 5);
}
}
